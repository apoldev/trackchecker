[
  {
    "code": "gtt",
    "masks": [
      "[A-Z]{2}[0-9]{9}[A-Z]{2}"
    ],
    "examples": [
      "RK166520145LV",
      "RB328428764SG"
    ],
    "tasks":[
      {
        "type":"request",
        "payload":"https://globaltracktrace.ptc.post/gtt.api/service.svc/rest/ItemTTWithTrans/[track]/en",
        "params":{
          "method":"GET",
          "type":"json.xpath"
        },
        "field":{
        }
      },
      {
        "type": "query",
        "payload": "//DestinationCountryCd",
        "field": {
          "path": "CountryTo"
        }
      },
      {
        "type": "query",
        "payload": "//OriginCountryCd",
        "field": {
          "path": "CountryFrom"
        }
      },
      {
        "type":"query",
        "payload":"//EventDT/..",
        "field":{
          "path":"events",
          "type":"array",
          "element":{
            "type":"object",
            "object":[
              {
                "path":"status",
                "query":"EventNm"
              },
              {
                "path":"date",
                "query":"EventDT"
              },
              {
                "path":"place",
                "query":"EventLocation"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "code":"usps",
    "masks": [
      "[A-Z]{2}[0-9]{9}US"
    ],
    "examples": [
      "EH036261918US"
    ],
    "tasks":[
      {
        "type":"request",
        "payload":"http://production.shippingapis.com/ShippingApi.dll?API=TrackV2&XML=%3CTrackFieldRequest%20USERID=%22707HGUPS0501%22%3E%3CTrackID%20ID=%22[track]%22/%3E%3C/TrackFieldRequest%3E",
        "params":{
          "method":"GET",
          "type":"xml"
        }
      },
      {
        "type":"query",
        "payload":"//TrackSummary|//TrackDetail",
        "field":{
          "path":"events",
          "type":"array",
          "element":{
            "type":"object",
            "object":[
              {
                "path":"status",
                "query":".//Event"
              },
              {
                "path":"date",
                "query":"concat(./EventDate,' ', ./EventTime)"
              },
              {
                "path":"place",
                "query":"concat(./EventCity,', ', ./EventState, ' ', ./EventZIPCode)"
              },
              {
                "path":"country",
                "query":"./EventCountry"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "code":"russian-post",
    "masks": [
      "[0-9]{14}",
      "[A-Z]{2}[0-9]{9}RU"
    ],
    "tasks":[
      {
        "type":"request",
        "payload":"http://www.pochta.ru/api/tracking/api/v1/trackings/by-barcodes?language=ru\u0026track-numbers=[track]",
        "params":{
          "type":"json"
        },
        "field":{
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.recipient",
        "field":{
          "path":"Recipient"
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.sender",
        "field":{
          "path":"Sender"
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.trackingHistoryItemList",
        "field":{
          "path":"events",
          "type":"array",
          "element":{
            "type":"object",
            "object":[
              {
                "path":"status",
                "query":"humanStatus"
              },
              {
                "path":"date",
                "query":"date"
              },
              {
                "path":"place",
                "query":"cityName"
              },
              {
                "path":"zip",
                "query":"index"
              },
              {
                "path":"meta.description",
                "query":"description"
              },
              {
                "path":"meta.service",
                "query":"countryCustomName"
              }
            ]
          }
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.trackingHistoryItemList.1",
        "field":{
          "path":"one_event_example",
          "type":"object",
          "object":[
            {
              "path":"status",
              "query":"humanStatus"
            },
            {
              "path":"date",
              "query":"date"
            },
            {
              "path":"place",
              "query":"cityName"
            },
            {
              "path":"zip",
              "query":"index"
            },
            {
              "path":"meta.description",
              "query":"description"
            },
            {
              "path":"meta.service",
              "query":"countryCustomName"
            }
          ]
        }
      }
    ]
  },
  {
    "code":"dpd-poland",
    "masks": [
      "[0-9]{14}"
    ],
    "tasks":[
      {
        "type":"request",
        "payload":"https://tracktrace.dpd.com.pl/EN/findPackage",
        "params":{
          "body":"q=[track]\u0026typ=1",
          "method":"POST",
          "type":"xpath"
        },
        "field":{
        }
      },
      {
        "type":"query",
        "payload":"//table[@class=\"table-track\"]/tbody/tr",
        "field":{
          "path":"events",
          "type":"array",
          "element":{
            "type":"object",
            "object":[
              {
                "path":"status",
                "query":"./td[3]/text()[1]"
              },
              {
                "path":"fulldate",
                "query":"concat(//td[1],' ', //td[2])"
              },
              {
                "path":"date",
                "query":"td[1]"
              },
              {
                "path":"time",
                "query":"td[2]"
              },
              {
                "path":"place",
                "query":"./td[4]"
              },
              {
                "path":"details",
                "query":"./td[3]/a"
              }
            ]
          }
        }
      }
    ]
  }
]