[
  {
    "code":"russian-post",
    "masks": [
      "^[0-9]{14}$"
    ],
    "tasks":[
      {
        "type":"request",
        "payload":"http://www.pochta.ru/api/tracking/api/v1/trackings/by-barcodes?language=ru\u0026track-numbers=[track]",
        "params":{
          "type":"json"
        },
        "field":{
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.recipient",
        "field":{
          "path":"Recipient"
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.sender",
        "field":{
          "path":"Sender"
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.trackingHistoryItemList",
        "field":{
          "path":"events1"
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.trackingHistoryItemList",
        "field":{
          "path":"events2",
          "type":"array"
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.trackingHistoryItemList",
        "field":{
          "path":"events3",
          "type":"array",
          "element":{
            "type":"object",
            "object":[
              {
                "path":"status",
                "query":"humanStatus"
              },
              {
                "path":"date",
                "query":"date"
              },
              {
                "path":"place",
                "query":"cityName"
              },
              {
                "path":"zip",
                "query":"index"
              },
              {
                "path":"meta.description",
                "query":"description"
              },
              {
                "path":"meta.service",
                "query":"countryCustomName"
              }
            ]
          }
        }
      },
      {
        "type":"query",
        "payload":"detailedTrackings.0.trackingItem.trackingHistoryItemList.1",
        "field":{
          "path":"events4",
          "type":"object",
          "object":[
            {
              "path":"status",
              "query":"humanStatus"
            },
            {
              "path":"date",
              "query":"date"
            },
            {
              "path":"place",
              "query":"cityName"
            },
            {
              "path":"zip",
              "query":"index"
            },
            {
              "path":"meta.description",
              "query":"description"
            },
            {
              "path":"meta.service",
              "query":"countryCustomName"
            }
          ]
        }
      }
    ]
  },
  {
    "code":"dpd-poland",
    "masks": [
      "[0-9]{14}"
    ],
    "tasks":[
      {
        "type":"request",
        "payload":"https://tracktrace.dpd.com.pl/EN/findPackage",
        "params":{
          "body":"q=[track]\u0026typ=1",
          "method":"POST",
          "type":"xpath"
        },
        "field":{
        }
      },
      {
        "type":"query",
        "payload":"//table[@class=\"table-track\"]/tbody/tr",
        "field":{
          "path":"events",
          "type":"array",
          "element":{
            "type":"object",
            "object":[
              {
                "path":"status",
                "query":"./td[3]/text()[1]"
              },
              {
                "path":"fulldate",
                "query":"concat(//td[1],' ', //td[2])"
              },
              {
                "path":"date",
                "query":"td[1]"
              },
              {
                "path":"time",
                "query":"td[2]"
              },
              {
                "path":"place",
                "query":"./td[4]"
              },
              {
                "path":"details",
                "query":"./td[3]/a"
              }
            ]
          }
        }
      }
    ]
  }
]